- if user_signed_in?
  - article_button_data = {'switch-target': '#article-form-widget', 'switch-source': "#editors-tab", toggle: "parti-switch", type: "button", focus: ( local_assigns[:issue] and !issue.is_all? ? 'input#article_link' : 'input#issue_title')}
  - opinion_button_data = {'switch-target': '#opinion-form-widget', 'switch-source': "#editors-tab", toggle: "parti-switch", type: "button", focus: ( local_assigns[:issue] and !issue.is_all? ? 'input#opinion_title' : 'input#issue_title')}
- else
  - article_button_data = opinion_button_data = {toggle: "parti-login-overlay"}

.media{ style: 'margin-bottom: 10px;' }
  .media-left
    - if user_signed_in?
      = link_to user_gallery_path(current_user) do
        = image_tag current_user.image_url, class: 'media-object img-circle', style: 'width:50px;height:50px;'
    - else
      = image_tag 'anonymous.png', class: 'media-object img-circle', style: 'width:50px;height:50px;'
  .media-body
    .row#editors-tab{style: 'margin-top: 8px;'}
      .col-xs-6{ style: 'padding-right: 1px;' }
        = link_to '', data: article_button_data, class: 'btn btn-primary btn-ghost btn-block' do
          %i.fa.fa-link
          링크걸기
      .col-xs-6{ style: 'padding-left: 1px;' }
        = link_to '#', data: opinion_button_data, class: 'btn btn-primary btn-ghost btn-block' do
          %i.fa.fa-microphone
          발언하기

    #article-form-widget.well.clearfix{ style: 'background: none; display: none;' }
      = form_for Article.new, html: { novalidate: true, data: {action: 'parti-form-validation', 'submit-form-control': '#article-form-widget form input[type=submit]' } } do |f|

        - if local_assigns[:issue] and !issue.is_all?
          = hidden_field_tag :issue_title, issue.title
        - else
          .form-group
            .input-group
              .input-group-addon 이슈
              = text_field_tag :issue_title, (issue.try(:title) unless issue.is_all?), class: 'form-control typeahead', placeholder: '이슈를 입력하세요.', autocomplete: 'off', data: { 'provider': 'parti-issue-typeahead', 'typeahead-url': issues_path, 'typeahead-display-field': 'title', 'title' => issue.try(:title), 'rule-required': true, 'rule-extern': true, 'rule-extern-value': false }, style: 'width: 200px'
            %p.help-block.typeahead-warning
            %p.help-block{ style: 'font-size: 12px;' }
              추천하는 이슈
              - Issue.featured_issues(current_user).each do |issue|
                %a(href='#' data-action="parti-form-set-vaule" data-form-control="form input#issue_title" data-form-vaule="#{issue.title}")
                  = issue.title
                \/

        .form-group
          = f.text_field :link, placeholder: '링크를 넣어주세요.', class: 'form-control', style: 'border: none; box-shadow: none; padding: 0;', data: { 'rule-required': true}

        .form-group
          = text_area_tag :comment_body, '', placeholder: '이야기 해주세요.', class: 'form-control', style: 'border: none; box-shadow: none; padding: 0;', data: { ride: 'parti-autoresize', 'rule-required': true}

        .form-group
          .pull-right
            = f.submit '게시', class: 'btn btn-primary'
          %a.btn.btn-ghost{href: '#', data: {'switch-source': '#article-form-widget', 'switch-target': "#editors-tab", toggle: "parti-switch", type: "button", 'disabled-typeahead-validation': 'true'}} 닫기

    #opinion-form-widget.well.clearfix{ style: 'background: none; display: none;' }
      = form_for Opinion.new, html: { novalidate: true, data: {action: 'parti-form-validation', 'submit-form-control': '#opinion-form-widget form input[type=submit]' } } do |f|

        - if local_assigns[:issue] and !issue.is_all?
          = hidden_field_tag :issue_title, issue.title
        - else
          .form-group
            .input-group
              .input-group-addon 이슈
              = text_field_tag :issue_title, (issue.try(:title) unless issue.is_all?), class: 'form-control typeahead', placeholder: '이슈를 입력하세요.', autocomplete: 'off', data: { 'provider': 'parti-issue-typeahead', 'typeahead-url': issues_path, 'typeahead-display-field': 'title', 'title' => issue.try(:title), 'rule-required': true, 'rule-extern': true, 'rule-extern-value': false }, style: 'width: 200px'
            %p.help-block.typeahead-warning
            %p.help-block{ style: 'font-size: 12px;' }
              추천하는 이슈
              - Issue.featured_issues(current_user).each do |issue|
                %a(href='#' data-action="parti-form-set-vaule" data-form-control="form input#issue_title" data-form-vaule="#{issue.title}")
                  = issue.title
                \/

        .form-group.form-group-lg
          = f.text_field :title, class: 'form-control input-lg', maxlength: 50, placeholder: '내용을 써주세요(최대 50자)'
          %p.help-block
            라는 발언에 나는
            %strong 찬성
            합니다.

        .form-group
          %p.help-block 왜냐하면
          = text_area_tag :comment_body, '', { class: 'form-control', placeholder: '이유를 적어주세요' }

        .form-group
          .pull-right
            = f.submit '게시', class: 'btn btn-primary'
          %a.btn.btn-ghost{href: '#', data: {'switch-source': '#opinion-form-widget', 'switch-target': "#editors-tab", toggle: "parti-switch", type: "button", focus: 'input#opinion_title', 'disabled-typeahead-validation': 'true'}} 닫기
